const express = require('express');
const router = express.Router();
const { getAllBooks, getBookById, uploadBook, getMostViewedBooks } = require('../controllers/bookController');
const upload = require('../middleware/upload'); // Add this

// Specific routes first
router.get('/most-viewed', getMostViewedBooks);
// Use upload.single('cover') for the upload route
router.post('/upload', upload.single('cover'), uploadBook);
router.get('/', getAllBooks);
router.get('/:id', getBookById);

module.exports = router;